<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>嫡系计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#10b981',
                        accent: '#8b5cf6',
                        neutral: '#1f2937',
                        'neutral-light': '#f3f4f6',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .btn-primary {
                @apply bg-primary text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all duration-300 transform hover:scale-105;
            }
            .btn-secondary {
                @apply bg-white text-neutral font-medium py-3 px-6 rounded-lg shadow-md border border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-all duration-300 transform hover:scale-105;
            }
            .progress-bar {
                @apply h-2 bg-gray-200 rounded-full overflow-hidden;
            }
            .progress-value {
                @apply h-full bg-primary transition-all duration-500 ease-out;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen font-sans text-neutral">
    <!-- 首页 -->
    <div id="home-page" class="min-h-screen flex flex-col items-center justify-center p-6 transition-opacity duration-500">
        <div class="text-center max-w-md mx-auto">
            <h1 class="text-[clamp(2.5rem,8vw,4rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-accent mb-6 leading-tight text-shadow">
                嫡系计算器
            </h1>
            <p class="text-gray-600 text-lg mb-10">
                通过7个维度测试，评估你在组织中的嫡系程度
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button id="start-btn" class="btn-primary flex items-center justify-center gap-2">
                    <i class="fa fa-play-circle"></i> 开始测试
                </button>
                <button id="share-btn" class="btn-secondary flex items-center justify-center gap-2">
                    <i class="fa fa-share-alt"></i> 分享
                </button>
            </div>
        </div>
        
        <div class="absolute bottom-8 left-0 right-0 text-center text-gray-400 text-sm">
            <p>职场趣味测试 · 仅供参考</p>
        </div>
    </div>
    
    <!-- 测试页面 -->
    <div id="quiz-page" class="min-h-screen p-6 hidden">
        <div class="max-w-2xl mx-auto">
            <!-- 进度条 -->
            <div class="mb-8">
                <div class="flex justify-between text-sm text-gray-500 mb-2">
                    <span>问题 <span id="current-question">1</span>/7</span>
                    <span id="progress-text">14%</span>
                </div>
                <div class="progress-bar">
                    <div id="progress-bar" class="progress-value" style="width: 14%"></div>
                </div>
            </div>
            
            <!-- 题目卡片 -->
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-8 transform transition-all duration-500">
                <h2 id="question-text" class="text-2xl font-bold mb-6 text-neutral">组织关系</h2>
                
                <div id="options-container" class="space-y-3">
                    <!-- 选项将通过JS动态生成 -->
                </div>
            </div>
            
            <!-- 导航按钮 -->
            <div class="flex justify-between">
                <button id="prev-btn" class="btn-secondary hidden" disabled="">
                    <i class="fa fa-arrow-left mr-2"></i> 上一题
                </button>
                <div class="ml-auto">
                    <button id="next-btn" class="btn-primary">
                        下一题 <i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 结果页面 -->
    <div id="result-page" class="min-h-screen p-6 hidden">
        <div class="max-w-3xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-2">测试结果</h2>
            <p class="text-gray-500 text-center mb-8">你的职场嫡系指数分析</p>
            
            <!-- 结果卡片 -->
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-8 transform transition-all duration-500 hover:shadow-2xl">
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <!-- 得分信息 -->
                    <div class="text-center md:text-left flex-1">
                        <div class="inline-block px-4 py-1 rounded-full bg-blue-100 text-primary text-sm font-medium mb-3">
                            综合评分
                        </div>
                        <h3 class="text-5xl font-bold text-neutral mb-2" id="total-score">0</h3>
                        <h4 class="text-2xl font-semibold mb-4 text-accent" id="dixi-level">评估中...</h4>
                        <p class="text-gray-600" id="level-description">请完成测试查看结果</p>
                    </div>
                    
                    <!-- 雷达图 -->
                    <div class="w-full md:w-64 h-64 flex-1">
                        <canvas id="radar-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- 行动按钮 -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center mb-10">
                <button id="restart-btn" class="btn-primary flex items-center justify-center gap-2">
                    <i class="fa fa-refresh"></i> 重新测试
                </button>
                <button id="share-result-btn" class="btn-secondary flex items-center justify-center gap-2">
                    <i class="fa fa-share-alt"></i> 分享结果
                </button>
            </div>
            
            <!-- 新增的图片和文字区域 -->
            <div class="text-center mb-8">
                <p class="text-gray-600 text-sm mb-4">大厂知识库，致力于突破大厂信息茧房，持续分享职场干货，欢迎进群~</p>
                <div class="bg-white p-4 rounded-xl shadow-md inline-block">
                    <!-- 这里是默认图片，您可以替换src中的链接 -->
                    <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/code_assistant/e1891b2cd7414809a70eee3c89a5195a~tplv-a9rns2rl98-image.image?rk3s=8e244e95&amp;rrcfp=e75484ac&amp;x-expires=1754614361&amp;x-signature=lM27Fu4%2BH2rRT4kNMSAK7ER02X8%3D" alt="大厂知识库二维码" class="w-64 h-64 object-cover rounded-lg">
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 题目数据
        const questions = [
            {
                id: 1,
                title: "组织关系",
                dimension: "组织关系",
                options: [
                    { text: "跨三级汇报", score: 20 },
                    { text: "跨两级汇报", score: 40 },
                    { text: "直接汇报", score: 60 },
                    { text: "直接汇报+同部门≥3年", score: 80 },
                    { text: "领导前嫡系团队", score: 100 }
                ]
            },
            {
                id: 2,
                title: "信任等级",
                dimension: "信任等级",
                options: [
                    { text: "仅工作沟通", score: 20 },
                    { text: "参与常规会议", score: 40 },
                    { text: "参加领导小范围会议", score: 60 },
                    { text: "处理领导私人事务", score: 80 },
                    { text: "掌握领导核心资源", score: 100 }
                ]
            },
            {
                id: 3,
                title: "项目权重",
                dimension: "项目权重",
                options: [
                    { text: "支持性工作", score: 20 },
                    { text: "独立模块负责人", score: 40 },
                    { text: "核心项目骨干", score: 60 },
                    { text: "战略项目负责人", score: 80 },
                    { text: "领导亲自指派项目", score: 100 }
                ]
            },
            {
                id: 4,
                title: "晋升轨迹",
                dimension: "晋升轨迹",
                options: [
                    { text: "无晋升", score: 20 },
                    { text: "正常晋升", score: 40 },
                    { text: "破格晋升", score: 60 },
                    { text: "跟随领导调岗晋升", score: 80 },
                    { text: "领导特批职级", score: 100 }
                ]
            },
            {
                id: 5,
                title: "资源倾斜",
                dimension: "资源倾斜",
                options: [
                    { text: "资源受限", score: 25 },
                    { text: "标准配置", score: 50 },
                    { text: "优先获取资源", score: 75 },
                    { text: "领导特批资源", score: 100 }
                ]
            },
            {
                id: 6,
                title: "信息权限",
                dimension: "信息权限",
                options: [
                    { text: "信息滞后", score: 25 },
                    { text: "同步知悉", score: 50 },
                    { text: "提前获知未公开信息", score: 75 },
                    { text: "参与决策讨论", score: 100 }
                ]
            },
            {
                id: 7,
                title: "危机处理",
                dimension: "危机处理",
                options: [
                    { text: "被牺牲", score: 25 },
                    { text: "中立状态", score: 50 },
                    { text: "领导公开维护", score: 75 },
                    { text: "领导私下保护", score: 100 }
                ]
            }
        ];
        
        // 等级评定标准
        const levels = [
            { min: 60, max: 100, level: "心腹嫡系", description: "参与重大决策，掌握核心资源，领导心腹" },
            { min: 50, max: 60, level: "核心圈层", description: "负责关键业务，资源优先配置，领导核心圈层" },
            { min: 40, max: 50, level: "外围人员", description: "常规工作关系，无特殊关照" },
            { min: 0, max: 40, level: "风险人员", description: "可能被边缘化或优化" }
        ];
        
        // 全局变量
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let radarChart = null;
        
        // DOM元素
        const homePage = document.getElementById('home-page');
        const quizPage = document.getElementById('quiz-page');
        const resultPage = document.getElementById('result-page');
        const startBtn = document.getElementById('start-btn');
        const shareBtn = document.getElementById('share-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const shareResultBtn = document.getElementById('share-result-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const currentQuestionEl = document.getElementById('current-question');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const totalScoreEl = document.getElementById('total-score');
        const dixiLevelEl = document.getElementById('dixi-level');
        const levelDescriptionEl = document.getElementById('level-description');
        
        // 初始化事件监听
        function initEventListeners() {
            startBtn.addEventListener('click', goToQuiz);
            shareBtn.addEventListener('click', shareApp);
            prevBtn.addEventListener('click', goToPrevQuestion);
            nextBtn.addEventListener('click', goToNextQuestion);
            restartBtn.addEventListener('click', restartQuiz);
            shareResultBtn.addEventListener('click', shareResult);
        }
        
        // 页面切换动画
        function fadeOut(element, callback) {
            element.style.opacity = '1';
            element.style.transition = 'opacity 0.3s ease-out';
            element.style.opacity = '0';
            
            setTimeout(() => {
                element.classList.add('hidden');
                if (callback) callback();
            }, 300);
        }
        
        function fadeIn(element) {
            element.classList.remove('hidden');
            element.style.opacity = '0';
            setTimeout(() => {
                element.style.transition = 'opacity 0.3s ease-in';
                element.style.opacity = '1';
            }, 50);
        }
        
        // 前往测试页面
        function goToQuiz() {
            fadeOut(homePage, () => {
                fadeIn(quizPage);
                loadQuestion(currentQuestionIndex);
            });
        }
        
        // 返回首页
        function goToHome() {
            fadeOut(resultPage, () => {
                fadeIn(homePage);
            });
        }
        
        // 加载问题
        function loadQuestion(index) {
            const question = questions[index];
            questionText.textContent = question.title;
            currentQuestionEl.textContent = question.id;
            
            // 更新进度
            const progress = ((index + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}%`;
            
            // 清空并生成选项
            optionsContainer.innerHTML = '';
            question.options.forEach((option, optIndex) => {
                const optionEl = document.createElement('div');
                optionEl.className = `option card-hover border rounded-xl p-4 cursor-pointer ${
                    userAnswers[index] === optIndex ? 'border-primary bg-blue-50' : 'border-gray-200 hover:border-primary/50'
                }`;
                optionEl.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-5 h-5 rounded-full border-2 ${
                            userAnswers[index] === optIndex ? 'border-primary bg-primary' : 'border-gray-300'
                        } flex items-center justify-center mr-3">
                            ${userAnswers[index] === optIndex ? '<i class="fa fa-check text-white text-xs"></i>' : ''}
                        </div>
                        <span>${option.text}</span>
                    </div>
                `;
                
                optionEl.addEventListener('click', () => {
                    userAnswers[index] = optIndex;
                    loadQuestion(index); // 重新加载以更新选中状态
                });
                
                optionsContainer.appendChild(optionEl);
            });
            
            // 更新按钮状态
            prevBtn.disabled = index === 0;
            prevBtn.classList.toggle('hidden', index === 0);
            nextBtn.textContent = index === questions.length - 1 ? '查看结果' : '下一题';
            nextBtn.innerHTML = index === questions.length - 1 
                ? '查看结果 <i class="fa fa-arrow-right ml-2"></i>'
                : '下一题 <i class="fa fa-arrow-right ml-2"></i>';
        }
        
        // 上一题
        function goToPrevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
                // 添加页面切换动画
                const card = document.querySelector('.transform');
                card.style.transform = 'translateX(-20px)';
                setTimeout(() => {
                    card.style.transform = 'translateX(0)';
                }, 50);
            }
        }
        
        // 下一题或提交
        function goToNextQuestion() {
            // 检查是否已选择答案
            if (userAnswers[currentQuestionIndex] === undefined) {
                // 提示用户选择答案
                const card = document.querySelector('.transform');
                card.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    card.style.animation = '';
                }, 500);
                return;
            }
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
                // 添加页面切换动画
                const card = document.querySelector('.transform');
                card.style.transform = 'translateX(20px)';
                setTimeout(() => {
                    card.style.transform = 'translateX(0)';
                }, 50);
            } else {
                // 计算结果并显示
                calculateResult();
                fadeOut(quizPage, () => {
                    fadeIn(resultPage);
                    renderRadarChart();
                });
            }
        }
        
        // 计算结果
        function calculateResult() {
            let totalScore = 0;
            const dimensionScores = [];
            
            questions.forEach((question, index) => {
                const selectedOption = question.options[userAnswers[index]];
                totalScore += selectedOption.score;
                dimensionScores.push({
                    dimension: question.dimension,
                    score: selectedOption.score
                });
            });
            
            // 计算平均分
            const averageScore = (totalScore / questions.length).toFixed(1);
            totalScoreEl.textContent = averageScore;
            
            // 确定等级
            let levelInfo = levels[3]; // 默认最低等级
            for (const level of levels) {
                if (averageScore > level.min) {
                    levelInfo = level;
                    break;
                }
            }
            
            dixiLevelEl.textContent = levelInfo.level;
            levelDescriptionEl.textContent = levelInfo.description;
            
            // 设置等级颜色
            switch(levelInfo.level) {
                case "心腹嫡系":
                    dixiLevelEl.classList.add('text-green-600');
                    break;
                case "核心圈层":
                    dixiLevelEl.classList.add('text-blue-600');
                    break;
                case "外围人员":
                    dixiLevelEl.classList.add('text-orange-500');
                    break;
                case "风险人员":
                    dixiLevelEl.classList.add('text-red-500');
                    break;
            }
        }
        
        // 渲染雷达图
        function renderRadarChart() {
            const ctx = document.getElementById('radar-chart').getContext('2d');
            
            // 准备数据
            const labels = questions.map(q => q.dimension);
            const data = questions.map((question, index) => {
                return question.options[userAnswers[index]].score;
            });
            
            // 如果已有图表，先销毁
            if (radarChart) {
                radarChart.destroy();
            }
            
            // 创建雷达图
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '你的得分',
                        data: data,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }
        
        // 重新测试
        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            // 移除等级颜色
            dixiLevelEl.className = 'text-2xl font-semibold mb-4 text-accent';
            fadeOut(resultPage, () => {
                fadeIn(quizPage);
                loadQuestion(currentQuestionIndex);
            });
        }
        
        // 分享功能
        function shareApp() {
            if (navigator.share) {
                navigator.share({
                    title: '嫡系计算器',
                    text: '快来测试一下你在组织中的嫡系程度吧！',
                    url: window.location.href
                }).catch(err => {
                    console.log('分享失败:', err);
                    showToast('分享功能暂不支持，请手动分享');
                });
            } else {
                showToast('分享功能暂不支持，请手动分享');
            }
        }
        
        // 分享结果
        function shareResult() {
            const score = totalScoreEl.textContent;
            const level = dixiLevelEl.textContent;
            
            if (navigator.share) {
                navigator.share({
                    title: '我的嫡系指数',
                    text: `我的嫡系指数是${score}，属于${level}！快来测试一下吧！`,
                    url: window.location.href
                }).catch(err => {
                    console.log('分享失败:', err);
                    showToast('分享功能暂不支持，请手动分享');
                });
            } else {
                showToast('分享功能暂不支持，请手动分享');
            }
        }
        
        // 显示提示
        function showToast(message) {
            // 创建toast元素
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-neutral text-white px-6 py-3 rounded-full shadow-lg z-50 opacity-0 transition-opacity duration-300';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // 显示toast
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 100);
            
            // 3秒后隐藏
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        // 添加动画样式
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
        
        // 初始化应用
        function init() {
            initEventListeners();
        }
        
        // 启动应用
        document.addEventListener('DOMContentLoaded', init);
    </script>


    </body></html>